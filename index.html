<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>NOCIV.CO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background-color: black;
      color: #cccccc; /* soft gray */
      font-family: Arial, Helvetica, sans-serif;
      text-align: center;
    }

    .container {
      padding: 15vh 20px;
      max-width: 700px;
      margin: auto;
    }

    h1 {
      font-size: 4rem;
      letter-spacing: 8px;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.2rem;
      letter-spacing: 2px;
      margin-bottom: 50px;
      color: #aaaaaa;
    }

    p.manifesto {
      font-size: 1.2rem;
      line-height: 2.2;
      margin-bottom: 60px;
    }

    .section {
      margin-top: 100px;
    }

    .button {
      display: inline-block;
      padding: 15px 40px;
      border: 1px solid #cccccc;
      text-decoration: none;
      color: #cccccc;
      margin-top: 30px;
    }

    .button:hover {
      background: #cccccc;
      color: black;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 id="site-title">NOCIV</h1>
    <div class="subtitle" id="site-subtitle">Nothing of Civilization</div>

    <p class="manifesto" id="site-manifesto">
      Representing Black America.<br><br>
      Showcasing present connection.<br><br>
      No ads. No algorithm. Just human.
    </p>

    <div class="section">
      <h2>Next Pop-Up</h2>
      <p id="site-popup">Phoenix, AZ<br>Coming Soon</p>
    </div>
  </div>

  <!-- Pull content from home.json (for Netlify CMS) -->
  <script>
    fetch('content/home.json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('site-title').innerText = data.title;
        document.getElementById('site-subtitle').innerText = data.subtitle;
        document.getElementById('site-manifesto').innerText = data.manifesto;
        document.getElementById('site-popup').innerText = data.popup;
      });
  </script>
</body>
</html>
<hr style="margin:80px 0; border-color:#2a2a2a;">

<section id="stall-wall" style="max-width:900px; margin:auto;">

<h2 style="letter-spacing:4px;">THE STALL WALL</h2>

<p style="opacity:.7; margin-bottom:40px;">
this is how word of mouth works, it goes peer to peer and reaches different states
</p>

<div id="states" style="margin-bottom:40px;"></div>

<div id="editor" style="display:none; margin-bottom:60px;">

<h2 id="stateTitle"></h2>

<div id="toolBar" style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:15px;"></div>

<canvas id="canvas"></canvas>

<div id="colorBar" style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;"></div>

<button id="sendBtn">Send Mark</button>

</div>

<div id="mainFeed"></div>

</section>

<script>
const states=[ "Alabama","Alaska","Arizona","Arkansas","California","Colorado",
"Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois",
"Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland",
"Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana",
"Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York",
"North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania",
"Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah",
"Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];

const stateContainer=document.getElementById("states");
const editor=document.getElementById("editor");
const stateTitle=document.getElementById("stateTitle");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const toolBar=document.getElementById("toolBar");
const colorBar=document.getElementById("colorBar");
const sendBtn=document.getElementById("sendBtn");
const mainFeed=document.getElementById("mainFeed");

let currentState="";
let tool="pencil";
let color="#000";
let drawing=false;
let history=[];
let redoStack=[];

/* Responsive canvas */
function resizeCanvas(){
  canvas.width=canvas.parentElement.offsetWidth;
  canvas.height=300;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

/* States */
states.forEach(s=>{
 let b=document.createElement("button");
 b.innerText=s;
 styleBtn(b);
 b.onclick=()=>{
   document.querySelectorAll("#states button").forEach(btn=>btn.style.background="#111");
   b.style.background="#444";
   currentState=s;
   stateTitle.innerText=s;
   editor.style.display="block";
 };
 stateContainer.appendChild(b);
});

/* Tools */
const tools=["pencil","eraser","spray","fill","text","undo","redo"];
tools.forEach(t=>{
 let b=document.createElement("button");
 b.innerText=t;
 styleBtn(b);
 b.onclick=()=>selectTool(t,b);
 toolBar.appendChild(b);
});

function selectTool(t,btn){
 tool=t;
 document.querySelectorAll("#toolBar button").forEach(b=>b.style.outline="none");
 btn.style.outline="2px solid white";
}

/* Colors */
const colors=["#0b3d2e","#8b0000","#d4a017","#000","#001f3f","#666","#ccc","#fff"];
colors.forEach(c=>{
 let sw=document.createElement("div");
 sw.style.width="28px";
 sw.style.height="28px";
 sw.style.background=c;
 sw.style.cursor="pointer";
 sw.onclick=()=>{
   color=c;
   document.querySelectorAll("#colorBar div").forEach(d=>d.style.outline="none");
   sw.style.outline="2px solid white";
 };
 colorBar.appendChild(sw);
});

/* Drawing */
canvas.addEventListener("mousedown",()=>{drawing=true;saveState();});
canvas.addEventListener("mouseup",()=>drawing=false);
canvas.addEventListener("mousemove",e=>{
 if(!drawing) return;
 if(tool==="pencil"){
   ctx.fillStyle=color;
   ctx.fillRect(e.offsetX,e.offsetY,3,3);
 }
 if(tool==="eraser"){
   ctx.clearRect(e.offsetX,e.offsetY,10,10);
 }
 if(tool==="spray"){
   ctx.fillStyle=color;
   for(let i=0;i<10;i++){
     let dx=Math.random()*20-10;
     let dy=Math.random()*20-10;
     ctx.fillRect(e.offsetX+dx,e.offsetY+dy,1,1);
   }
 }
});

/* Text tool */
canvas.addEventListener("click",e=>{
 if(tool==="text"){
   let text=prompt("Enter text");
   if(text){
     ctx.fillStyle=color;
     ctx.font="16px monospace";
     ctx.fillText(text,e.offsetX,e.offsetY);
     saveState();
   }
 }
});

/* Fill */
function selectToolAction(){
 if(tool==="fill"){
   saveState();
   ctx.fillStyle=color;
   ctx.fillRect(0,0,canvas.width,canvas.height);
 }
}

/* Undo/Redo */
function saveState(){
 history.push(canvas.toDataURL());
 redoStack=[];
}
function undo(){
 if(history.length){
   redoStack.push(canvas.toDataURL());
   let img=new Image();
   img.src=history.pop();
   img.onload=()=>ctx.drawImage(img,0,0);
 }
}
function redo(){
 if(redoStack.length){
   history.push(canvas.toDataURL());
   let img=new Image();
   img.src=redoStack.pop();
   img.onload=()=>ctx.drawImage(img,0,0);
 }
}

toolBar.querySelectorAll("button")[4].onclick=undo;
toolBar.querySelectorAll("button")[5].onclick=redo;

/* Send */
sendBtn.innerText="Send Mark";
styleBtn(sendBtn);

sendBtn.onclick=()=>{
 saveState();
 const image=canvas.toDataURL();
 const today=new Date();
 const month=today.toLocaleString('en-US',{month:'short'}).toLowerCase();
 const date=`${month}.${today.getDate()}.${today.getFullYear()}`;
 const post={state:currentState,image,date,time:Date.now()};
 let posts=JSON.parse(localStorage.getItem("stallPosts"))||[];
 posts.unshift(post);
 localStorage.setItem("stallPosts",JSON.stringify(posts));
 ctx.clearRect(0,0,canvas.width,canvas.height);
 renderFeed();
};

/* Feed */
function renderFeed(){
 mainFeed.innerHTML="";
 let posts=JSON.parse(localStorage.getItem("stallPosts"))||[];
 posts=posts.filter(p=>Date.now()-p.time<30*24*60*60*1000);
 localStorage.setItem("stallPosts",JSON.stringify(posts));
 posts.forEach(p=>{
   let wrap=document.createElement("div");
   wrap.style.borderTop="1px solid #222";
   wrap.style.padding="20px 0";
   wrap.style.display="flex";
   wrap.style.flexDirection="column";

   let header=document.createElement("div");
   header.style.display="flex";
   header.style.justifyContent="space-between";
   header.style.marginBottom="10px";

   let tag=document.createElement("div");
   tag.innerText=p.state;
   tag.style.border="1px solid #444";
   tag.style.padding="4px 8px";
   tag.style.fontSize="12px";

   let date=document.createElement("div");
   date.innerText=p.date;
   date.style.fontSize="12px";
   date.style.opacity=".6";

   header.appendChild(tag);
   header.appendChild(date);

   let img=document.createElement("img");
   img.src=p.image;
   img.style.width="100%";
   img.style.marginTop="10px";

   wrap.appendChild(header);
   wrap.appendChild(img);
   mainFeed.appendChild(wrap);
 });
}

function styleBtn(b){
 b.style.background="#111";
 b.style.color="#aaa";
 b.style.border="1px solid #333";
 b.style.padding="6px 10px";
 b.style.cursor="pointer";
 b.onmouseover=()=>b.style.background="#333";
 b.onmouseout=()=>b.style.background="#111";
}

renderFeed();
</script>

